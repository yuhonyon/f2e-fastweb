webpackJsonp([1],{"/J2B":function(t,e){},"74So":function(t,e){},"7MPL":function(t,e){},"9+eq":function(t,e){},B4VN:function(t,e){},CBEU:function(t,e){},JP0S:function(t,e){},NHnr:function(t,e,o){"use strict";function n(t){o("7MPL")}function r(t){o("Sxh0")}function c(t){o("xY7v")}function s(t){o("B4VN")}function a(t){o("/J2B"),o("U0d2")}function i(t){o("CBEU")}Object.defineProperty(e,"__esModule",{value:!0});var u={};o.d(u,"getProject",function(){return ie}),o.d(u,"changeCurProject",function(){return ue}),o.d(u,"deleteProject",function(){return le}),o.d(u,"getPackageList",function(){return he});var l={};o.d(l,"project",function(){return je}),o.d(l,"curProject",function(){return _e}),o.d(l,"packageList",function(){return ge}),o.d(l,"compileProject",function(){return we}),o.d(l,"editingPackage",function(){return Pe});var h=o("5g9h"),m=o("34v0"),d=o.n(m),p=o("/DSx");o("psER"),o("bzKy");var f={name:"ems-modal",components:{codemirror:p.codemirror},data:function(){return{modalShow:!1}},props:{show:!1,code:String},watch:{show:function(){this.modalShow!==this.show&&(this.modalShow=this.show)},modalShow:function(){this.modalShow!==this.show&&this.$emit("update:show",this.modalShow)}}},v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{attrs:{title:"EMS 安装代码"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[o("codemirror",{attrs:{value:t.code,options:{mode:"hash",theme:"monokai"}}})],1)},j=[],_={render:v,staticRenderFns:j},g=_,w=o("XAIM"),P=w(f,g,!1,null,null,null),k=P.exports,C=o("3SZ7"),E=o.n(C),S=o("EcfS");o("psER"),o("bzKy");var L={name:"umd-modal",components:{codemirror:p.codemirror},created:function(){this.initBuild()},mounted:function(){this.scrollDom=this.$el.getElementsByClassName("CodeMirror-scroll")[0]},data:function(){return{modalShow:!1,code:"",socket:null,showJsDownload:!1,showCssDownload:!1,scrollDom:null}},props:{show:!1,umd:!1,packageList:String},computed:d()({},Object(S.c)(["compileProject"])),watch:{show:function(){this.modalShow!==this.show&&(this.show&&this.build(),this.modalShow=this.show)},modalShow:function(){this.modalShow!==this.show&&this.$emit("update:show",this.modalShow)}},methods:{build:function(){this.compileProject.packageList&&0!==this.compileProject.packageList.length&&(this.code="",this.showJsDownload=!1,this.showCssDownload=!1,this.socket.send(E()(this.compileProject)))},initBuild:function(){var t=this;this.socket||(this.socket=new WebSocket("ws://127.0.0.1:3034")),this.socket.onmessage=function(e){if(t.scrollDom.scrollTop=t.scrollDom.scrollHeight+50,"success js"!==e.data){if("success css"===e.data)return void(t.showCssDownload=!0);t.code+=e.data+"\n"}else if(t.showJsDownload=!0,!t.umd){t.code+="\n********生成commonJs代码********\ncnpm install ";for(var o in t.compileProject.packageList)t.code+=t.compileProject.packageList[o].name+"@"+t.compileProject.packageList[o].version+" ";t.code+="-S\n"}}}}},x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{attrs:{title:t.umd?"生成UMD":"生成COMMONJS"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[o("codemirror",{ref:"code",attrs:{value:t.code,options:{mode:"hash",theme:"monokai",lineWrapping:!0}}}),t._v(" "),o("div",[o("a",{directives:[{name:"show",rawName:"v-show",value:t.showJsDownload&&t.umd,expression:"showJsDownload&&umd"}],attrs:{download:"",href:"http://localhost:3013/fastweb.min.js"}},[t._v("下载js")]),o("a",{directives:[{name:"show",rawName:"v-show",value:t.showCssDownload,expression:"showCssDownload"}],attrs:{download:"",href:"http://localhost:3013/fastweb.min.css"}},[t._v("下载css")])])],1)},N=[],T={render:x,staticRenderFns:N},b=T,I=o("XAIM"),$=I(L,b,!1,null,null,null),y=$.exports,O={components:{Ems:k,Umd:y},data:function(){return{emsShow:!1,umdShow:!1,commonShow:!1,newProjectName:"",emsCode:""}},computed:d()({},Object(S.c)(["editingPackage","project","compileProject"]),{showSave:function(){return"Work"==this.$route.name&&this.project&&this.project.name},showOut:function(){return!(!this.compileProject.packageList||this.compileProject.packageList<=0)&&("Project"==this.$route.name||"Work"==this.$route.name&&this.project.packageList)}}),methods:d()({},Object(S.b)(["getProject"]),{selectEms:function(t){1==t?(this.getEmsCode(),this.emsShow=!0):2==t?this.commonShow=!0:this.umdShow=3},getEmsCode:function(){var t="cnpm install ";for(var e in this.compileProject.packageList)t+=" "+this.compileProject.packageList[e].name;t+=" -S",this.emsCode=t},newProject:function(){var t=this;this.newProjectName="",this.$Modal.confirm({title:"新建项目",onOk:function(){fetchApi.fetchNewProject({name:t.newProjectName}).then(function(){t.getProject({name:t.newProjectName}),t.$Message.success("创建成功"),t.$router.push({path:"work"})})},onCancel:function(){t.newProjectName=""},render:function(e){return e("Input",{props:{value:t.newProjectName,autofocus:!0,placeholder:"请输入项目名"},style:{"margin-top":"30px"},on:{input:function(e){t.newProjectName=e}}})}})},save:function(){var t=this,e=this.editingPackage.filter(function(t){return!0===t.selected});fetchApi.fetchSaveProject(this.project.name,{packageList:e}).then(function(){t.$Message.success("保存成功"),t.getProject(t.project.name)})}})},A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("ems",{attrs:{show:t.emsShow,code:t.emsCode},on:{"update:show":function(e){t.emsShow=e}}}),t._v(" "),o("umd",{attrs:{umd:!1,show:t.commonShow},on:{"update:show":function(e){t.commonShow=e}}}),t._v(" "),o("umd",{attrs:{umd:!0,show:t.umdShow},on:{"update:show":function(e){t.umdShow=e}}}),t._v(" "),o("Button",{on:{click:t.newProject}},[t._v("新建项目")]),t._v(" "),t.showSave?o("Button",{on:{click:t.save}},[t._v("保存")]):t._e(),t._v(" "),t.showOut?o("Dropdown",{on:{"on-click":t.selectEms}},[o("Button",[t._v("\n          生成代码\n          "),o("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"1"}},[t._v("EMS")]),t._v(" "),o("DropdownItem",{attrs:{name:"2"}},[t._v("COMMONJS")]),t._v(" "),o("DropdownItem",{attrs:{name:"3"}},[t._v("UMD")])],1)],1):t._e()],1)},M=[],D={render:A,staticRenderFns:M},R=D,G=o("XAIM"),J=G(O,R,!1,null,null,null),B=J.exports,z={name:"app",components:{NavHeader:B},data:function(){return{spanLeft:5,spanRight:19}},watch:{$route:function(){this.$nextTick(function(){this.$refs.sidebar.updateActiveName()})}},computed:{iconSize:function(){return 5===this.spanLeft?14:24},activeName:function(){return"Work"===this.$route.name?"2":"Npm"===this.$route.name||"NpmList"===this.$route.name?"3":"1"}},methods:{toggleClick:function(){5===this.spanLeft?(this.spanLeft=2,this.spanRight=22):(this.spanLeft=5,this.spanRight=19)}}},U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"layout",class:{"layout-hide-text":t.spanLeft<5}},[o("Row",{attrs:{type:"flex"}},[o("Col",{staticClass:"layout-menu-left",attrs:{span:t.spanLeft}},[o("Menu",{ref:"sidebar",attrs:{"active-name":t.activeName,theme:"dark",width:"auto"}},[o("div",{staticClass:"layout-logo-left"}),t._v(" "),o("router-link",{attrs:{to:"/project"}},[o("MenuItem",{attrs:{name:"1"}},[o("Icon",{attrs:{type:"ios-navigate",size:t.iconSize}}),t._v(" "),o("span",{staticClass:"layout-text"},[t._v("我的项目")])],1)],1),t._v(" "),o("router-link",{attrs:{to:"/work"}},[o("MenuItem",{attrs:{name:"2"}},[o("Icon",{attrs:{type:"ios-keypad",size:t.iconSize}}),t._v(" "),o("span",{staticClass:"layout-text"},[t._v("工作台")])],1)],1),t._v(" "),o("router-link",{attrs:{to:"/npm"}},[o("MenuItem",{attrs:{name:"3"}},[o("Icon",{attrs:{type:"ios-analytics",size:t.iconSize}}),t._v(" "),o("span",{staticClass:"layout-text"},[t._v("npm包")])],1)],1)],1)],1),t._v(" "),o("Col",{attrs:{span:t.spanRight}},[o("div",{staticClass:"layout-header"},[o("Button",{attrs:{type:"text"},on:{click:t.toggleClick}},[o("Icon",{attrs:{type:"navicon",size:"32"}})],1),t._v(" "),o("div",{staticClass:"fr"},[o("NavHeader")],1)],1),t._v(" "),o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("router-view")],1)]),t._v(" "),o("div",{staticClass:"layout-copy"},[t._v("\n      2011-2016 © TalkingData\n    ")])])],1)],1)},F=[],H={render:U,staticRenderFns:F},K=H,V=o("XAIM"),X=n,W=V(z,K,!1,X,"data-v-112f6f91",null),Z=W.exports,q=o("1eSk"),Y={name:"",data:function(){return{packageInfo:{versions:[]}}},created:function(){var t=this;fetchApi.fetchGetPackage({name:this.npmName}).then(function(e){t.packageInfo=e.package})},computed:{npmName:function(){return this.$route.path.replace(/^\/npm\//,"")}}},Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:""}},[o("h1",[t._v(t._s(t.packageInfo.name)+"-@"+t._s(t.packageInfo.versions[t.packageInfo.versions.length-1]))]),t._v(" "),o("div",{staticClass:"markdownStyle",domProps:{innerHTML:t._s(t.packageInfo.readme)}})])},tt=[],et={render:Q,staticRenderFns:tt},ot=et,nt=o("XAIM"),rt=r,ct=nt(Y,ot,!1,rt,null,null),st=ct.exports,at={name:"Home",data:function(){return{}},created:function(){this.packageList.length<=0&&this.getPackageList()},computed:d()({},Object(S.c)(["packageList"])),methods:d()({},Object(S.b)(["getPackageList"]))},it=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h1",[t._v("npm包列表")]),t._v(" "),o("ul",t._l(t.packageList,function(e){return o("router-link",{attrs:{to:"/npm/"+e.name}},[o("li",[t._v(t._s(e.name)+"@"+t._s(e.version)+" "),e.title?o("span",[t._v("-"+t._s(e.title))]):t._e()])])}))])},ut=[],lt={render:it,staticRenderFns:ut},ht=lt,mt=o("XAIM"),dt=c,pt=mt(at,ht,!1,dt,"data-v-8f94cee0",null),ft=pt.exports,vt={name:"work",created:function(){this.fetchData(),this.project.packageList||this.getProject()},computed:d()({},Object(S.c)(["editingPackage","project"])),methods:d()({},Object(S.b)(["getPackageList","getProject"]),{fetchData:function(){this.getPackageList()}})},jt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"work"}},[t.project.name?o("div",[o("h1",[t._v(t._s(t.project.name))])]):t._e(),t._v(" "),o("ul",{staticClass:"packageList"},t._l(t.editingPackage,function(e){return o("li",[o("Checkbox",{staticClass:"selected",model:{value:e.selected,callback:function(o){t.$set(e,"selected",o)},expression:"_package.selected"}}),t._v(" "),o("Select",{staticClass:"version",attrs:{size:"small",placeholder:"请选择"},model:{value:e.version,callback:function(o){t.$set(e,"version",o)},expression:"_package.version"}},t._l(e.versions,function(e){return o("Option",{key:e,attrs:{value:e}},[t._v(t._s(e)+"\n        ")])})),t._v(" "),o("span",[t._v("\n        "+t._s(e.name)+"("+t._s(e.title)+")\n      ")])],1)}))])},_t=[],gt={render:jt,staticRenderFns:_t},wt=gt,Pt=o("XAIM"),kt=s,Ct=Pt(vt,wt,!1,kt,null,null),Et=Ct.exports;o("psER"),o("bzKy");var St={name:"Project",created:function(){this.fetchData()},components:{codemirror:p.codemirror},computed:d()({},Object(S.c)(["curProject"]),{projectId:function(){return this.$route.params.id},commonCode:function(){if(!this.curProject.packageList)return"";var t="cnpm install ";for(var e in this.curProject.packageList)t+=(this.curProject.packageList[e].common||this.curProject.packageList[e].name)+"@"+this.curProject.packageList[e].version+" ";return t+="-S"},emsCode:function(){if(!this.curProject.packageList)return"";var t="cnpm install ";for(var e in this.curProject.packageList)t+=this.curProject.packageList[e].name+"@"+this.curProject.packageList[e].version+" ";return t+="-S"}}),methods:d()({},Object(S.b)(["getProject","changeCurProject","deleteProject"]),{fetchData:function(){this.changeCurProject(this.projectId)},edit:function(){this.getProject(this.curProject)},remove:function(){var t=this;this.$Modal.confirm({title:"警告",content:"确定删除?",onOk:function(){t.deleteProject(t.curProject.name).then(function(){t.$Message.info("删除成功"),t.$router.replace({path:"/project"})})},onCancel:function(){t.$Message.info("取消删除")}})}})},Lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:""}},[o("h1",[t._v(t._s(t.curProject.name))]),t._v(" "),o("p",[t._v("创建时间:"+t._s(t.curProject.createTime))]),t._v(" "),t.curProject.changeTime?o("p",[t._v("最近修改时间:"+t._s(t.curProject.changeTime))]):t._e(),t._v(" "),o("h3",[t._v("npm 包")]),t._v(" "),o("ul",{},t._l(t.curProject.packageList,function(e){return o("li",[o("span",[t._v("\n        "+t._s(e.name)+"-"+t._s(e.version)+"("+t._s(e.title)+")\n      ")])])})),t._v(" "),o("div",[o("h3",[t._v("ems code")]),t._v(" "),o("div",{staticClass:"emsCode"},[o("codemirror",{attrs:{value:t.emsCode,options:{mode:"hash",theme:"monokai",height:50}}})],1)]),t._v(" "),o("div",[o("h3",[t._v("commonjs code")]),t._v(" "),o("div",{staticClass:"commonCode"},[o("codemirror",{attrs:{value:t.commonCode,options:{mode:"hash",theme:"monokai",height:50}}}),t._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:t.curProject.css,expression:"curProject.css"}],attrs:{download:"",href:t.curProject.css}},[t._v("下载css")])],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.curProject.js,expression:"curProject.js"}]},[o("h3",[t._v("umd code")]),t._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:t.curProject.css,expression:"curProject.css"}],attrs:{download:"",href:t.curProject.css}},[t._v("下载css")]),t._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:t.curProject.js,expression:"curProject.js"}],attrs:{download:"",href:t.curProject.js}},[t._v("下载js")])]),t._v(" "),o("div",{staticClass:"btn"},[o("router-link",{directives:[{name:"show",rawName:"v-show",value:!!t.curProject.name,expression:"!!curProject.name"}],attrs:{to:"/work"}},[o("Button",{staticClass:"edit",attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")])],1),t._v(" "),o("Button",{attrs:{type:"error"},on:{click:t.remove}},[t._v("删除")])],1)])},xt=[],Nt={render:Lt,staticRenderFns:xt},Tt=Nt,bt=o("XAIM"),It=a,$t=bt(St,Tt,!1,It,"data-v-71728ae8",null),yt=$t.exports,Ot={name:"ProjectList",created:function(){this.fetchData()},data:function(){return{projectList:[]}},methods:{fetchData:function(){var t=this;fetchApi.fetchGetProjectList().then(function(e){t.projectList=e.projectList})}}},At=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:""}},[o("h1",[t._v("项目列表")]),t._v(" "),o("ul",t._l(t.projectList,function(e){return o("router-link",{attrs:{to:"project/"+e}},[o("li",[t._v("\n        "+t._s(e)+"\n      ")])])}))])},Mt=[],Dt={render:At,staticRenderFns:Mt},Rt=Dt,Gt=o("XAIM"),Jt=i,Bt=Gt(Ot,Rt,!1,Jt,"data-v-cd3efa32",null),zt=Bt.exports;h.default.use(q.a);var Ut=new q.a({routes:[{path:"/",redirect:"/project"},{path:"/work",name:"Work",component:Et},{path:"/project",name:"ProjectList",component:zt},{path:"/project/:id",name:"Project",component:yt},{path:"/npm",name:"NpmList",component:ft},{path:"/npm/*/:id",name:"Npm",component:st},{path:"/npm/:id",name:"Npm",component:st},{path:"*",redirect:"/project"}]}),Ft=o("0G4t"),Ht=o.n(Ft),Kt=(o("asJK"),o("74So"),o("j9M8")),Vt=o.n(Kt),Xt=(o("9+eq"),o("UIuv")),Wt=o.n(Xt),Zt=o("gCy3"),qt=o.n(Zt),Yt=qt.a.create({baseURL:"http://127.0.0.1:3033/api",timeout:2e3});Yt.interceptors.response.use(function(t){return t.data},function(t){return this.$Message.error(t.response.data.msg),Wt.a.reject(t)});var Qt,te=Yt,ee={fetchGetAllPackages:function(){return te.get("/packages",function(t){return t})},fetchGetProjectList:function(){return te.get("/projects",function(t){return t})},fetchGetProject:function(t){return te.get("/project/"+t,function(t){return t})},fetchDeleteProject:function(t){return te.delete("/project/"+t,function(t){return t})},fetchSaveProject:function(t,e){return te.put("/project/"+t,e,function(t){return t})},fetchNewProject:function(t){return te.post("/project/",t,function(t){return t})},fetchGetPackage:function(t){return te.get("/package",{params:t},function(t){return t})}},oe=ee,ne=o("Dufx"),re=o("GxZn"),ce=o.n(re),se={GET_PACKAGE_LIST:"GET_PACKAGE_LIST",GET_PROJECT:"GET_PROJECT",CHANGE_CUR_PROJECT:"CHANGE_CUR_PROJECT",DELETE_PROJECT:"DELETE_PROJECT"},ae=se,ie=function(t,e){var o=t.commit;if("object"===(void 0===e?"undefined":ce()(e)))return o(ae.GET_PROJECT,e),void localStorage.setItem("project",E()(e));if(!e){var n=localStorage.getItem("project");return void(n&&o(ae.GET_PROJECT,JSON.parse(n)))}fetchApi.fetchGetProject(e).then(function(t){localStorage.setItem("project",E()(t.project)),o(ae.GET_PROJECT,t.project)})},ue=function(t,e){var o=t.commit;fetchApi.fetchGetProject(e).then(function(t){o(ae.CHANGE_CUR_PROJECT,t.project)})},le=function(t,e){var o=t.commit;return new Wt.a(function(t,n){fetchApi.fetchDeleteProject(e).then(function(e){o(ae.DELETE_PROJECT),t(e)})})},he=function(t){var e=t.commit;fetchApi.fetchGetAllPackages().then(function(t){var o=t.packageList;e(ae.GET_PACKAGE_LIST,o)})},me=o("WxFH"),de=o.n(me),pe=(Qt={},de()(Qt,ae.GET_PROJECT,function(t,e){t.project=e}),de()(Qt,ae.CHANGE_CUR_PROJECT,function(t,e){t.curProject=e}),de()(Qt,ae.GET_PACKAGE_LIST,function(t,e){t.packageList=e}),de()(Qt,ae.DELETE_PROJECT,function(t){t.curProject.name===t.project.name&&(t.project={},localStorage.removeItem("project")),t.curProject={}}),Qt),fe=pe,ve=o("89vk"),je=function(t){return t.project},_e=function(t){return t.curProject},ge=function(t){return t.packageList},we=function(t){return"Project"===t.route.name?t.curProject:t.project},Pe=function(t){var e=Object(ve.cloneDeep)(t.packageList);if(t.project.packageList){for(var o in t.project.packageList)!function(o){var n=t.project.packageList[o].name,r=e.findIndex(function(t){return t.name===n});r>=0&&(e[r].selected=!0,e[r].version=t.project.packageList[o].version)}(o)}return e},ke={project:{},curProject:{},packageList:[]},Ce=ke;h.default.use(S.a);var Ee=new S.a.Store({state:Ce,getters:l,actions:u,mutations:fe}),Se=Ee;h.default.use(Vt.a),h.default.use(Ht.a);Object(ne.sync)(Se,Ut);window.Fetch=te,window.fetchApi=oe,h.default.config.productionTip=!1,new h.default({el:"#app",router:Ut,store:Se,template:"<App/>",components:{App:Z}})},Sxh0:function(t,e){},U0d2:function(t,e){},asJK:function(t,e){},bzKy:function(t,e){},fS8W:function(t,e,o){"use strict";function n(t){o("JP0S")}Object.defineProperty(e,"__esModule",{value:!0});var r=o("GxZn"),c=o.n(r),s=o("59BI");o("v8N6");var a={props:{value:{type:String,default:""},options:{type:Object,default:function(){return{mode:"text/javascript",lineNumbers:!0,lineWrapping:!0}}}},data:function(){return{skipNextChangeEvent:!1}},ready:function(){var t=this;this.editor=s.fromTextArea(this.$el,this.options),this.editor.setValue(this.value),this.editor.on("change",function(e){if(t.skipNextChangeEvent)return void(t.skipNextChangeEvent=!1);t.value=e.getValue(),t.$emit&&t.$emit("change",e.getValue())})},mounted:function(){var t=this;this.editor=s.fromTextArea(this.$el,this.options),this.editor.setValue(this.value),this.editor.on("change",function(e){if(t.skipNextChangeEvent)return void(t.skipNextChangeEvent=!1);t.$emit&&(t.$emit("change",e.getValue()),t.$emit("input",e.getValue()))})},watch:{value:function(t,e){if(t!==this.editor.getValue()){this.skipNextChangeEvent=!0;var o=this.editor.getScrollInfo();this.editor.setValue(t),this.editor.scrollTo(o.left,o.top)}},options:function(t,e){if("object"===(void 0===t?"undefined":c()(t)))for(var o in t)t.hasOwnProperty(o)&&this.editor.setOption(o,t[o])}},beforeDestroy:function(){this.editor&&this.editor.toTextArea()}},i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea")},u=[],l={render:i,staticRenderFns:u},h=l,m=o("XAIM"),d=n,p=m(a,h,!1,d,null,null);e.default=p.exports},v8N6:function(t,e){},xY7v:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0d8cd32e00d2dbe2dc31.js.map