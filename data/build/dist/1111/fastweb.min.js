!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fastweb",[],e):"object"==typeof exports?exports.fastweb=e():t.fastweb=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,i){"use strict";var n=i(7),o=i(8);i.n(o);window.f2eModalZIndex=9999;class s extends n.a{constructor(t,e){super(),f2eModalZIndex++,this.f2eModalZIndex=f2eModalZIndex,e&&(this.$element=$(e)),this.defaults={backdrop:!0,show:!1,time:0,type:"defalut",width:null,height:null,container:document.body,location:"center",content:null,title:null,icon:"logo",btn:null,mold:"",value:"",animation:["fadeIn","fadeOut"],animationSpeed:500,backdropClass:"modal-backdrop",containerClass:"modal-container",headerClass:"modal-header",footerClass:"modal-footer",iconClass:"modal-icon",contentClass:"modal-content",toastClass:"modal-toast",onInit:null,onShow:null,onClickBtn:null,onHide:null},this.DEFAULT_ICON={ok:"",error:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QzgxNjk4NzQxRUQxMUU3ODAzRkZBRjU3RTAwQUE3NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QzgxNjk4ODQxRUQxMUU3ODAzRkZBRjU3RTAwQUE3NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdDODE2OTg1NDFFRDExRTc4MDNGRkFGNTdFMDBBQTc2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdDODE2OTg2NDFFRDExRTc4MDNGRkFGNTdFMDBBQTc2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+GTORKwAAB0pJREFUeNrUWmls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",warning:""},this._timer={},this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),this.init(t)}init(t){this.destroy(),t&&!t.animation&&t.location&&("top"==t.location?this.defaults.animation=["slideInUp","slideOutUp"]:"bottom"==t.location&&(this.defaults.animation=["slideInDown","slideOutDown"])),this.options=$.extend(!1,{},this.defaults,t),t&&(this._creatModal(),this.options.show&&this.show()),this.emit("onInit",this)}_changeContent(t){return this.$modalContent.html(t),this}_changeOptions(t){return this.options=$.extend(!0,this.options,t),this}_creatModal(){if(this.options.backdrop&&(this.$backdrop=$("<div style='z-index:"+(f2eModalZIndex-1)+"' class='"+this.options.backdropClass+"'></div>"),$(this.options.container).append(this.$backdrop),this.$backdrop.on("touchmove",()=>!1),!0===this.options.backdrop&&this.$backdrop.on("click",()=>{this.hide()})),this.$element)return this.$modalContainer=this.$element,this.$modalContainer.css("zIndex",f2eModalZIndex),$(this.options.container).append(this.$modalContainer),this.$element.on("click",".modal-close",()=>{this.hide()}),void this._location();if(this.$modalContainer=$("<div style='z-index:"+f2eModalZIndex+"' class='"+this.options.containerClass+"'></div>"),this.options.width&&this.$modalContainer.css("width",this.options.width),this.options.height&&this.$modalContainer.css("height",this.options.height),this.$modalContent=$("<div class='"+this.options.contentClass+"'></div>"),this.options.title&&(this.$modalHeader=$("<div class='"+this.options.headerClass+"'>"+this.options.title+"</div>"),this.$modalContainer.append(this.$modalHeader)),this.options.icon){let t=this.DEFAULT_ICON[this.options.icon]?this.DEFAULT_ICON[this.options.icon]:this.options.icon;this.$modalIcon=$("<div class='"+this.options.iconClass+"'><img src='"+t+"' /></div>")}if(this.$modalContent.append(this.$modalIcon),this.$modalContent.append(this.options.content),this.$modalContainer.append(this.$modalContent),this.options.btn){this.$modalFooter=$("<div class='"+this.options.footerClass+"'></div>"),this.$modalContainer.append(this.$modalFooter),this.$modalFooter.on("click","button",t=>{this.emit("onClickBtn",this,t)});for(let t in this.options.btn){let e=$("<button>"+t+"</button>");e.on("click",e=>{this.options.btn[t]&&("prompt"==this.options.mold?this.options.btn[t].bind(this)(this.$input.val(),e):this.options.btn[t].bind(this)(e)),this.hide(),setTimeout(()=>{this.destroy()},this.options.animationSpeed)}),this.$modalFooter.append(e),e=null}}$(this.options.container).append(this.$modalContainer),this.$modalContainer.on("click",".modal-close",()=>{this.hide()}),"toast"==this.options.mold&&this.$modalContainer.addClass(this.options.toastClass),"prompt"==this.options.mold&&(this.$input=$("<input class='modal-prompt' type='text'/>"),this.$input.val(this.options.value),this.$modalContent.append(this.$input)),this._location()}_location(){"top"==this.options.location?this.$modalContainer.addClass("top"):"bottom"==this.options.location?this.$modalContainer.addClass("bottom"):this.$modalContainer.addClass("center")}_autoHideModal(){0!=this.options.time&&(this._clearTimer(),this._timer.autoHideTimer=setTimeout(()=>{this.hide()},this.options.time))}_clearTimer(t){if(void 0===t)for(let t in this._timer)clearTimeout(this._timer[t]);else clearTimeout(this._timer[t])}show(){if(this.$modalContainer||this._creatModal(),this.$modalContainer.is(":hidden"))return this.f2eModalZIndex<f2eModalZIndex&&(f2eModalZIndex++,this.f2eModalZIndex=f2eModalZIndex,this.$modalContainer.css("zIndex",f2eModalZIndex),this.options.backdrop&&this.$backdrop.css("zIndex",f2eModalZIndex)),this.$modalContainer.addClass(this.options.animation[0]).removeClass(this.options.animation[1]),this.options.backdrop&&this.$backdrop.fadeIn(300),this.$modalContainer.show(),this._autoHideModal(),this.emit("onShow",this),this}hide(t){if(t)return this._clearTimer(),this.$modalContainer.hide(),this.options.backdrop&&this.$backdrop.hide(),this.emit("onHide",this),this;if(this.$modalContainer&&!this.$modalContainer.is(":hidden"))return this.$modalContainer.addClass(this.options.animation[1]).removeClass(this.options.animation[0]),this._clearTimer(),this._timer.hideTimer=setTimeout(()=>{this.$modalContainer.hide()},this.options.animationSpeed),this.options.backdrop&&this.$backdrop.fadeOut(300),this.emit("onHide",this),this}destroy(){this.$modalContainer&&this.$modalContainer.remove(),this.$backdrop&&this.$backdrop.remove(),this._clearTimer(),this.$backdrop=null,this.$modalContainer=null,this.$modalContent=null,this.$modalHeader=null,this.$modalFooter=null,this.$modalIcon=null,this.emit("onDestroy",this)}}e.a=s},function(t,e,i){"use strict";e.b=function(t){let e=document.cookie.split("; ");for(let i in e){let n=e[i].split("=");if(t==n[0])return unescape(n[1])}return null},e.c=function(t,e,i,n,o){document.cookie=t+"="+e+(i?"; expires="+function(t){let e=new Date;return e.setTime(e.getTime()+60*t*60*1e3),e.toGMTString()}(i):"")+(n?"; path="+n:"")+(o?"; domain="+o:"")};window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame},function(t,e,i){"use strict";i(0);var n=i(3);i(9);i.d(e,"a",function(){return n})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.alert=function(t,e,i){let o,s;$.isFunction(e)&&(i=e,e=null),i||(s=new Promise((t,e)=>{o={resolve:t,reject:e}}),i=o.resolve);let r={backdrop:"static",content:t,btn:{"确定":i},title:null,icon:e?null:"logo",mold:"alert",show:!0};return s?(new n.a(r),s):new n.a(r)},e.confirm=function(t,e=null,i,o){let s,r;$.isFunction(e)&&(o=i,i=e,e=null),o||i||(r=new Promise((t,e)=>{s={resolve:t,reject:e}}),i=s.resolve,o=s.reject);let a={backdrop:"static",content:t,btn:{"确定":i,"取消":o},title:e,icon:e?null:"logo",mold:"confirm",show:!0};return r?(new n.a(a),r):new n.a(a)},e.prompt=function(t,e,i=null,o,s){let r,a;$.isFunction(i)&&(s=o,o=i,i=null),$.isFunction(e)&&(s=o,o=e,e=null),s||o||(a=new Promise((t,e)=>{r={resolve:t,reject:e}}),o=r.resolve,s=r.reject);let l={backdrop:"static",content:t,btn:{"确定":o,"取消":s},title:i,icon:i?null:"logo",mold:"prompt",show:!0,value:e};return a?(new n.a(l),a):new n.a(l)},e.toast=function(t,e=1e3){if(!o){let i={backdrop:!1,content:t,btn:null,time:e,title:null,icon:null,show:!0,mold:"toast"};return o=new n.a(i),console.log(o),o}o.$modalContainer.is(":hidden")||o.hide(!0),o._changeOptions({time:e})._changeContent(t).show()};var n=i(0);let o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=i(10),s=i(1),r=i(2);i.d(e,"Modal",function(){return r.default}),i.d(e,"Utils",function(){return s.default}),i.d(e,"HtmlTemp",function(){return o.a}),i.d(e,"WechatLogin",function(){return n.a})},function(t,e,i){"use strict";var n=i(1),o=i(6);class s{constructor(t){this.wechatUserInfo=t}getWechatApi(){return Object(o.a)("jkys-wechat","","/v3")}getWechatUserInfo(t){null!=this.wechatUserInfo?t&&t.constructor===Function&&t(this.wechatUserInfo):this.isWechatLogin()?this.getBindInfo(t):this.checkLoginWithAction()}checkLoginWithAction(){Object(n.c)("re_url",encodeURIComponent(location.href.replace(/&from=singlemessage/,"")),1,"/",".91jkys.com"),this.wechatAuth()}wechatAuth(){jQuery.support.cors=!0,$.ajax({url:this.getWechatApi()+"/wechat/relogin",xhrFields:{withCredentials:!0},data:{returnUrl:!0},success:function(t){location.href=t.url}})}isWechatLogin(){return!!Object(n.b)("login")}getBindInfo(t){jQuery.support.cors=!0,$.ajax({url:this.getMallApi()+"/user/getBindInfo",xhrFields:{withCredentials:!0},success:function(e){0==e.errcode?(this.wechatUserInfo=e,t&&t.constructor===Function&&t(this.wechatUserInfo)):this.checkLoginWithAction()},error:function(){this.checkLoginWithAction()}})}getMallApi(){var t=location.host,e=location.protocol;return t.indexOf("static.91jkys.com")>-1||t.indexOf("static.mall-91jkys.com")>-1?e+"//mall-wechat.91jkys.com/v3":t.indexOf("static.pre.91jkys.com")>-1||t.indexOf("static.pre.mall-91jkys.com")>-1?e+"//mall-wechat.pre.91jkys.com/v3":e+"//api.qa.91jkys.com/mall-wechat/v3"}}e.a=s},function(t,e,i){"use strict";e.a=function(t,e,i="/"){let n=window.location.host,o="";return/\.pre\./.test(n)?o=".pre":/(\.qa\.)|localhost:|\d+\.\d+\.\d+\.\d/.test(n)&&(o=".qa"),`${location.protocol}//${t}${o}.91jkys.com${e?":"+e:""}${i}`};i(2);const n=window.navigator.userAgent,o="undefined"!=typeof Sailer;/^tangyi/.test(n),/^tangyi-gongzuozhan/.test(n),o?Sailer.isWechat:/MicroMessenger/i.test(n),o?Sailer.isAndroid:/Android/i.test(n),o?Sailer.isIOS:/iPhone|iPad|iPod/i.test(n)},function(t,e,i){"use strict";class n{constructor(){this.emitter=[]}emit(t,...e){if(this.emitter[t])for(let i=0;i<this.emitter[t].length;i++)this.emitter[t][i](...e);this.options&&this.options[t]&&this.options[t](...e)}on(t,e){return this.emitter[t]||(this.emitter[t]=[]),this.emitter[t].push(e),this}off(t,e){if(void 0===e)return this.emitter[t]=[],this;if(this.emitter[t]&&0!==this.emitter[t].length){for(let i=0;i<this.emitter[t].length;i++)this.emitter[t][i]===e&&this.emitter[t].splice(i,1);return this}}one(t,e){let i=(...n)=>{e(...n),this.off(t,i)};return this.on(t,i),this}}e.a=n},function(t,e){},function(t,e,i){"use strict";i(0),i(3)},function(t,e,i){"use strict";function n(t,e,i){return("string"==typeof e?e:e.toString()).replace(t.define||l,function(e,n,o,s){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===o?(t.defineParams&&s.replace(t.defineParams,function(t,e,o){i[n]={arg:e,text:o}}),n in i||(i[n]=s)):new Function("def","def['"+n+"']="+s)(i)),""}).replace(t.use||l,function(e,o){t.useParams&&(o=o.replace(t.useParams,function(t,e,n,o){if(i[n]&&i[n].arg&&o){let t=(n+":"+o).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[t]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),e+"def.__exp['"+t+"']"}}));let s=new Function("def","return "+o)(i);return s?n(t,s,i):s})}function o(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}let s,r={templateSettings:{evaluate:/\<\%([\s\S]+?(\}?)+)\%\>/g,interpolate:/\<\%=([\s\S]+?)\%\>/g,encode:/\<\%!([\s\S]+?)\%\>/g,use:/\<\%#([\s\S]+?)\%\>/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\<\%##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\%\>/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\<\%\?(\?)?\s*([\s\S]*?)\s*\%\>/g,iterate:/\<\%~\s*(?:\%\>|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\%\>)/g,varname:"data",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},filters:{},template:void 0,compile:void 0,render:void 0,log:!0,cache:{}};r.encodeHTMLSource=function(t){let e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}},s=function(){return this||(0,eval)("this")}();let a={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},l=/$^/;r.template=function(t,e,i){let d,c,h=(e=e||r.templateSettings).append?a.append:a.split,u=0,p=e.use||e.define?n(e,t,i||{}):t;p=("var out='"+(e.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(e.interpolate||l,function(t,e){if(/\|/.test(e)){let t;t=/\|\|/.test(e)?(e=(e=(e=e.replace(/\|\|/g,"@#$*")).replace(/\|/g,"*$#@")).replace(/@#\$\*/g,"||")).split("*$#@"):e.split("|"),e=function(t){let e=t[0];for(let i=1;i<t.length;i++)if(/\(/.test(t[i])){let n=t[i].split("(");if(!r.filters[n[0]])throw new Error("过滤器"+n[0]+"不存在");e="filters['"+n[0]+"']("+e+","+n[1]}else{if(!r.filters[t[i]])throw new Error("过滤器"+t[i]+"不存在");e="filters['"+t[i]+"']("+e+")"}return e}(t)}return h.start+o(e)+h.end}).replace(e.encode||l,function(t,e){return d=!0,h.startencode+o(e)+h.end}).replace(e.conditional||l,function(t,e,i){return e?i?"';}else if("+o(i)+"){out+='":"';}else{out+='":i?"';if("+o(i)+"){out+='":"';}out+='"}).replace(e.iterate||l,function(t,e,i,n){return e?(u+=1,c=n||"i"+u,e=o(e),"';var arr"+u+"="+e+";if(arr"+u+"){var "+i+","+c+"=-1,l"+u+"=arr"+u+".length-1;while("+c+"<l"+u+"){"+i+"=arr"+u+"["+c+"+=1];out+='"):"';} } out+='"}).replace(e.evaluate||l,function(t,e){return"';"+o(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),d&&(e.selfcontained||!s||s._encodeHTML||(s._encodeHTML=r.encodeHTMLSource(e.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+r.encodeHTMLSource.toString()+"("+(e.doNotSkipEncoded||"")+"));"+p);try{return new Function(e.varname,"filters",p)}catch(t){throw"undefined"!=typeof console&&console.log("无法创建这个模板函数: "+p),t}},r.render=function(t,e,i,n){return"object"!=typeof i&&(n=i=null),r.compile(t,i,n)(e,r.filters)},r.renderDom=function(t,e,i,n,o){"object"==typeof t&&t.tagName||(t=document.getElementById(t.replace(/^#/,""))),t.innerHTML=r.render(e,i,n,o)},r.compile=function(t,e,i){"object"!=typeof e&&(i=e=null);let n;return r.cache[i]?n=r.cache[i]:("object"==typeof t&&t.tagName?t=t.innerHTML:"string"!=typeof t||/</.test(t)||(t=(t=document.getElementById(t.replace(/^#/,"")))?t.innerHTML:""),n=r.template(t,null,e),i&&(r.cache[i]=n)),n},e.a=r}])});